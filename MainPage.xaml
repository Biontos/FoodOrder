<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:FoodOrderApp"
             x:Class="FoodOrderApp.MainPage"
             Title="Главная"
             BackgroundColor="#F4F4F4">

    <ScrollView>
        <StackLayout Padding="20" Spacing="20">
            <Image Source="ebidoeebi_logo.png" HeightRequest="80" HorizontalOptions="Center" />

            <Label Text="Выберите товары" FontSize="24" FontAttributes="Bold" HorizontalOptions="Center" />

            <CollectionView x:Name="ProductCollection" ItemsSource="{Binding Products}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="15" Margin="10" BackgroundColor="White" CornerRadius="10" HasShadow="True">
                            <StackLayout Orientation="Horizontal" Spacing="15">
                                <!-- Image for the product -->
                                <Image Source="{Binding ImageUrl}" WidthRequest="60" HeightRequest="60" VerticalOptions="Center" />

                                <Label Text="{Binding Name}" FontSize="18" FontAttributes="Bold" VerticalOptions="Center" WidthRequest="150" />
                                <Label Text="{Binding Price, StringFormat='Цена: {0:C}'}" FontSize="16" VerticalOptions="Center" HorizontalOptions="EndAndExpand" />
                                <Entry Placeholder="Кол-во" Keyboard="Numeric" Text="{Binding Quantity, Mode=TwoWay}" WidthRequest="60" HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Button Text="Добавить" Command="{Binding Source={RelativeSource AncestorType={x:Type local:MainPage}}, Path=AddToCartCommand}" CommandParameter="{Binding .}" BackgroundColor="#FF6F61" TextColor="White" FontSize="14" Padding="10" CornerRadius="5" VerticalOptions="Center" />
                            </StackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Label x:Name="TotalPriceLabel" Text="Итоговая цена: 0₽" FontSize="20" FontAttributes="Bold" HorizontalOptions="Center" Padding="10" />

            <Button Text="Перейти в корзину" Command="{Binding NavigateToCartCommand}" BackgroundColor="#FF6F61" TextColor="White" FontSize="18" Padding="10" CornerRadius="10" HorizontalOptions="Center" />
        </StackLayout>
    </ScrollView>
</ContentPage>
