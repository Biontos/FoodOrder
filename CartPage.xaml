<?xml version="1.0" encoding="UTF-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:FoodOrderApp"
             x:Class="FoodOrderApp.CartPage"
             Title="Корзина"
             BackgroundColor="#F4F4F4">

    <StackLayout Padding="20" Spacing="20">
        <Label Text="Корзина" FontSize="28" FontAttributes="Bold" HorizontalOptions="Center" />

        <CollectionView x:Name="CartCollection" ItemsSource="{Binding Cart}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="15" Margin="10" BackgroundColor="White" CornerRadius="10" HasShadow="True">
                        <StackLayout Orientation="Horizontal" Spacing="15">
                            <Label Text="{Binding Product.Name}" FontSize="18" FontAttributes="Bold" VerticalOptions="Center" WidthRequest="150" />
                            <Label Text="{Binding Quantity, StringFormat='Кол-во: {0}'}" FontSize="16" VerticalOptions="Center" HorizontalOptions="CenterAndExpand" />
                            <Label Text="{Binding Product.Price, StringFormat='Цена: {0:C}'}" FontSize="16" VerticalOptions="Center" HorizontalOptions="EndAndExpand" />
                            <Button Text="Удалить" Command="{Binding Source={RelativeSource AncestorType={x:Type local:CartPage}}, Path=RemoveFromCartCommand}" CommandParameter="{Binding .}" BackgroundColor="#FF6F61" TextColor="White" FontSize="14" Padding="8" CornerRadius="5" VerticalOptions="Center" />
                        </StackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Button Text="Оформить заказ" Command="{Binding PlaceOrderCommand}" BackgroundColor="#FF6F61" TextColor="White" FontSize="18" Padding="10" CornerRadius="10" HorizontalOptions="Center" />
    </StackLayout>
</ContentPage>
